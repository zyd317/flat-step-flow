!function(t,e){for(var n in e)t[n]=e[n]}(exports,function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/lib/",n(n.s=0)}([function(t,e,n){"use strict";function r(){this.flows=[],this.steps=[],this.errorHandles=[]}n.r(e),n.d(e,"default",(function(){return r})),r.prototype={constructor:r,use:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",e="function"==typeof t,n=e?"default":String(t),r=[].slice.call(arguments,e?0:1),i=this.flows[n],o=this.steps;return-1===o.indexOf(n)&&o.push(n),Array.isArray(i)||(i=this.flows[n]=[]),r.forEach((function(t){"function"==typeof t&&i.push(t)})),this},run:function(t,e,n){var r,i=this.steps,o=e?i.indexOf(e):0;return-1===o&&(o=0),r={stepIndex:o,flowIndex:0},this.next(n,r,t||{},null),this},next:function(t,e,n,r,i){if(r)return this._runErrorHandlers(r,n,t),this;var o=this.steps,s=this.flows,u=o[e.stepIndex],f=s[u];if(e.flowIndex>=f.length){if(!(e.stepIndex<o.length-1))return this;e.stepIndex+=1,e.flowIndex=0,u=o[e.stepIndex],f=s[o[e.stepIndex]]}var l=f[e.flowIndex++],c=this.next.bind(this,t,e,n),a=this.nextTo.bind(this,t,n);try{l.call(t,n,c,a,i)}catch(r){this._runErrorHandlers(r,n,t)}return this},nextTo:function(t,e,n,r){var i=this.steps.indexOf(n);if("string"!=typeof n||!n)throw Error("The `step` parameter must be a non-empty string");if(-1===i)throw Error("The step `"+n+"` not exists");return this.next(t,{stepIndex:i,flowIndex:0},e,null,r),this},catch:function(t){return this.errorHandles.push(t),this},_runErrorHandlers:function(t,e,n){return this.errorHandles.forEach((function(r){r.call(n,t,e)})),this}}}]));